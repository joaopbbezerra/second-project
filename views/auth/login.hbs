<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>Login and Registration Form in HTML | CodingNepal</title>
      <link rel="stylesheet" href="style.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link href= "https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
      <style>
        .passwordInput{
            margin-top: 5%; 
            text-align :center;
        }

        .displayBadge{
            margin-top: 5%; 
            display: none; 
            text-align :center;
        }
    </style>
   </head>
   <body>


      <div class="wrapper">
         <div class="title-text">
            <div class="title login">
               Login Form
            </div>
            <div class="title signup">
               Signup Form
            </div>
         </div>
         <div class="form-container">
            <div class="slide-controls">
               <input type="radio" name="slide" id="login" checked>
               <input type="radio" name="slide" id="signup">
               <label for="login" class="slide login">Login</label>
               <label for="signup" class="slide signup">Signup</label>
               <div class="slider-tab"></div>
            </div>
            <div class="form-inner">
               <form action="/login" class="login" method="POST">
                  <div class="field">
                     <input type="text" name="username" placeholder="Username" required>
                  </div>
                  <div class="field">
                     <input type="password" name="password" placeholder="Password" required>
                  </div>
                  <div class="pass-link">
                     <a href="/login">Forgot password?</a>
                  </div>
                  <div class="field btn">
                     <div class="btn-layer"></div>
                     <input type="submit" value="Login">
                  </div>
                  <div class="signup-link">
                     Not a member? <a href="">Signup now</a>
                  </div>
               </form>
               <form action="/signup" class="signup" method="POST"  enctype="multipart/form-data">
                  <div class="field">
                     <input type="text" name="username" placeholder="Username" required>
                  </div>
                    <div class="field">
                        <input type="text" name="name" placeholder="Name" required>
                    </div>
                  <div class="field">
                     <input type="password" name="password" placeholder="Password" id="PassEntry" class="form-control passwordInput" required>
                  </div>
                    <span id="StrengthDisp" class="badge displayBadge">Weak</span>
                  <div class="file-input profile-pict">
                    <input type="file" id="file" class="file img-input" name="image">
                    <label for="file">Profile Picture</label>
                  </div>
                  {{!-- {{#if errorMessage}}
                  <script>
                      function alertMsg (){
                          alert("Username or password invalid or already in use, please try again")
                      }
                      alertMsg()
                  </script>
                  
                  {{/if}} --}}

                {{#if errorMessage}}
                <div class="container" id="popup">
                    <input type="checkbox" id="check">
                    <label class="show_button" id="check" for="check">Click Me</label>
                    <div class="background"></div>
                    <div class="alert_box new-alert-box">
                        <div class="icon grey-icon">
                            <i class="far fa-heart"></i>
                        </div>
                        <p>Your username or password is invalid, please try again</p>
                        <div class="btns push-red-box">
                        <label for="check ">I will try again!</label>
                        </div>
                    </div>
                    </div>

                    
                    <script>
                    window.onload = function(){
                        const button = document.getElementById('check');
                        button.click()
                    }
                    document.querySelector('.push-red-box').onclick = () => {
                        document.querySelector('#popup').style.display = 'none';
                    }
                    </script>
                {{/if}}




                  <!-- <div class="field">
                     <input type="password" placeholder="Confirm password" required>
                  </div> -->
                  <div class="field btn">
                     <div class="btn-layer"></div>
                     <input type="submit" value="Signup">
                  </div>
               </form>
            </div>
         </div>
      </div>
      <script>
         const loginText = document.querySelector(".title-text .login");
         const loginForm = document.querySelector("form.login");
         const loginBtn = document.querySelector("label.login");
         const signupBtn = document.querySelector("label.signup");
         const signupLink = document.querySelector("form .signup-link a");
         signupBtn.onclick = (()=>{
           loginForm.style.marginLeft = "-50%";
           loginText.style.marginLeft = "-50%";
         });
         loginBtn.onclick = (()=>{
           loginForm.style.marginLeft = "0%";
           loginText.style.marginLeft = "0%";
         });
         signupLink.onclick = (()=>{
           signupBtn.click();
           return false;
         });
         //test do password
         let timeout;
let password = document.getElementById('PassEntry');
let strengthBadge = document.getElementById('StrengthDisp');
let strongPassword = new RegExp('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})')
let mediumPassword = new RegExp('((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))')
function StrengthChecker(PasswordParameter) {
    if(strongPassword.test(PasswordParameter)) {
        strengthBadge.style.backgroundColor = "green";
        strengthBadge.textContent = 'Strong';
    } else if(mediumPassword.test(PasswordParameter)) {
        strengthBadge.style.backgroundColor = 'blue';
        strengthBadge.textContent = 'Medium';
    } else {
        strengthBadge.style.backgroundColor = 'red';
        strengthBadge.textContent = 'Weak';
    }
}
password.addEventListener("input", () => {
    strengthBadge.style.display = 'block';
    clearTimeout(timeout);
    timeout = setTimeout(() => StrengthChecker(password.value), 500);
    if(password.value.length !== 0) {
        strengthBadge.style.display != 'block';
    } else {
        strengthBadge.style.display = 'none';
    }
});
      </script>
      
   </body>
   
</html>